<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Workout</ion-title>
    <ion-buttons slot="end">
      <ion-button *ngIf="!this.workoutStarted" (click)="onCircleClick()">
        <ion-icon name="play-circle-outline" slot="icon-only"> </ion-icon>
      </ion-button>
      <ion-button *ngIf="this.workoutStarted" (click)="onStopButtonClick()">
        <ion-icon name="stop-circle-outline" slot="icon-only"> </ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-grid>
    <ion-row>
      <ion-col size="3" size-sm="1" offset-sm="3" class="arrow-wrapper">
        <ion-button fill="clear" (click)="slideAction('back')">
          <ion-icon name="arrow-back" slot="icon-only"></ion-icon>
        </ion-button>
      </ion-col>
      <ion-col size="6" size-sm="4" class="ion-text-center">
        <ion-spinner name="crescent" *ngIf="isLoading"></ion-spinner>
        <ion-slides
          #progressSlider
          *ngIf="!isLoading && progressList && progressList.length > 0"
        >
          <ion-slide
            *ngFor="let progress of progressList"
            class="progress-wrapper"
          >
            <p class="ion-no-margin">{{progress.sets}}x{{progress.reps}}</p>
            <p *ngIf="progress.currentExercise" class="ion-no-margin">
              {{ progress.currentExercise.name }}
            </p>
            <p *ngIf="!progress.currentExercise" class="ion-no-margin">
              {{ progress.name }}
            </p>
          </ion-slide>
        </ion-slides>
        <ion-button
          fill="clear"
          *ngIf="!isLoading && !(progressList && progressList.length > 0)"
          [routerLink]="['/','home','progress']"
        >
          <ion-label>ADD PROGRESS</ion-label>
        </ion-button>
      </ion-col>
      <ion-col size="3" size-sm="1" class="arrow-wrapper">
        <ion-button fill="clear" (click)="slideAction('forward')">
          <ion-icon name="arrow-forward" slot="icon-only"></ion-icon>
        </ion-button>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size-sm="6" offset-sm="3">
        <form #workoutForm="ngForm">
          <ion-item>
            <ion-label>Rest Time </ion-label>
            <ion-datetime
              display-format="HH:mm:ss"
              picker-format="HH:mm:ss"
              value="00:02:00"
              [ngModel]="restTimeString"
              name="rest-time"
              #restTime="ngModel"
              (ionChange)="onRestTimeChange($event)"
            ></ion-datetime>
          </ion-item>
        </form>
      </ion-col>
    </ion-row>
  </ion-grid>
  <div class="circle-wrapper">
    <circle-progress
      [percent]="restPercent"
      [radius]="100"
      [outerStrokeWidth]="16"
      [innerStrokeWidth]="1"
      [outerStrokeColor]="'var(--ion-color-primary, black)'"
      [innerStrokeColor]="'var(--ion-color-primary, black)'"
      [animation]="false"
      [showSubtitle]="!workoutStarted"
      [title]="restString"
      [subtitle]="'START'"
      [subtitleFontSize]="'24'"
      [subtitleColor]="'#fff'"
      [titleColor]="restStringColor"
      [animateTitle]="true"
      [showUnits]="false"
      (onClick)="onCircleClick()"
    ></circle-progress>
  </div>
  <ion-grid>
    <ion-row>
      <ion-col class="ion-text-center">
        <h1 class="total-time ion-no-margin">{{ totalTimeString }}</h1>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
